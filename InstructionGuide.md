# 指令详解

下面将详细介绍mas汇编指令（未完成）。

- [指令详解](#指令详解)
  - [注释](#注释)
  - [标签](#标签)
  - [cmd](#cmd)
  - [mov](#mov)
  - [set](#set)
  - [load](#load)
  - [store](#store)
  - [cmp](#cmp)
- [cmpin](#cmpin)
- [b](#b)

## 注释

在任意行不在字符串内的`#`后的任何文本将被编译器忽略。
例如下面的都是合法的汇编代码
```
# hello world
debug "hello #### world"     # 打印一些“#”
```

## 标签

每个标签下的指令都会被编译为一个单独mcfunction文件。
例如`114514_Labels:`、`__1919810aaaa:`。可以以数字开头，但其中必须只包含字母、数字和下划线。

## cmd

直接执行minecraft命令，但必须用引号包含。

```
cmd "say hello there"     # 直接执行`say hello there`
```

## mov

将寄存器src的值复制到dst。

```
mov R1 R0                 # 将R0的值复制到R1
```

## set

为一个寄存器赋值

```
set R0 12345              # 将12345赋值给寄存器R0
```

## load

将内存中的值读取到寄存器R0

```
load 20                   # 将内存中下标为20的数据读取到寄存器R0
```

## store

将寄存器R0的值读取到内存中

```
store 30                  # 将寄存器R0的值读取到下标为30的内存中
```

## cmp

将寄存器R0和R1的值进行比较，将结果存储到R0中
比较符有`<`、`>`、`<=`、`>=`、`==`、`!=`

```
cmp ==                    # 如果寄存器R0和R1的值相等，则在R0存储1，否则存储0
cmp <                     # 如果寄存器R0的值小于R1的，则在R0存储1，否则存储0
```

# cmpin

将寄存器R0的值和固定表达式进行匹配，将结果存储到R0中。可以添加`not`标识符来反转结果。

```
cmpin -5..10             # 如果R0的值为-5、10或其之间任何值，则在R0存储1，否则存储0
cmpin not -5..10         # 如果R0的值不为-5、10或其之间任何值，则在R0存储1，否则存储0
cmpin 20                 # 如果R0的值为20，则在R0存储1，否则存储0
cmpin not 20             # 如果R0的值不为20，则在R0存储1，否则存储0
```

# b

branch。直接跳转到标签，在标签运行结束后返回。后台会直接编译为function指令。

```
b my_label               # 跳转到my_label
```
